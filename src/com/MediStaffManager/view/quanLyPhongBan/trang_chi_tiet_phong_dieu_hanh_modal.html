<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Demo Modal Chuyển Phòng</title>
    <link rel="stylesheet" href="style_chung.css">
</head>
<body>
    <div class="app-window">
        <main class="content-area">
            <h1 class="content-title">Demo Modal (Phòng Điều Hành)</h1>
            <div class="table-container" id="employeeDetailTableContainer">
                <table id="employeeDetailTable">
                    <thead>
                        <tr>
                            <th style="width: 120px; text-align:center;"><input type="checkbox" id="select-all"> Chọn tất cả</th>
                            <th>ID NV</th><th>Tên Nhân Viên</th><th>SĐT</th><th>Email</th><th>Chức Vụ</th><th>Phòng Ban</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td style="text-align:center;"><input type="checkbox" class="row-checkbox" value="4"></td>
                            <td>4</td>
                            <td>Phạm Thị D</td>
                            <td>0987654324</td>
                            <td>d.pham@example.com</td>
                            <td>Giám đốc</td>
                            <td>Phòng Điều Hành</td>
                        </tr>
                        <tr>
                            <td style="text-align:center;"><input type="checkbox" class="row-checkbox" value="7"></td>
                            <td>7</td>
                            <td>Trần Văn G</td>
                            <td>0987654327</td>
                            <td>g.tran@example.com</td>
                            <td>Quản lý</td>
                            <td>Phòng Điều Hành</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </main>
        <footer class="app-footer">
            <button class="btn btn-danger" id="btnDeleteSelectedEmployees">Xóa</button>
            <button class="btn btn-primary" id="btn-transfer-department">Chuyển phòng ban</button>
        </footer>
    </div>
    <div id="transferModal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Chuyển phòng ban cho nhân viên</h3>
                <span class="close-button" onclick="document.getElementById('transferModal').style.display='none'">&times;</span>
            </div>
            <div class="modal-body">
                <label for="department-select">Chọn phòng ban mới:</label>
                <select id="department-select" name="department-select" class="form-control">
                    <option value="">-- Vui lòng chọn --</option>
                    <!-- Options will be populated by JavaScript -->
                </select>
            </div>
            <div class="modal-footer">
                <button id="btn-cancel-transfer-action" class="btn btn-secondary">Hủy</button>
                <button id="btn-confirm-transfer-action" class="btn btn-primary">Xác nhận chuyển</button>
            </div>
        </div>
    </div>
    <div id="autoOpenModalMarker" style="display:none;"></div> <!-- Important marker -->
	<!-- Modal Xác Nhận Xóa Tùy Chỉnh -->
	<div id="customConfirmModal" class="modal-overlay" style="display: none;">
	    <div class="modal-content" style="max-width: 350px;">
	        <div class="modal-header">
	            <h3 id="customConfirmTitle">Xác nhận hành động</h3>
	            <!-- Có thể thêm nút đóng X nếu muốn, nhưng thường không cần cho confirm đơn giản -->
	        </div>
	        <div class="modal-body">
	            <p id="customConfirmMessage">Bạn có chắc chắn muốn thực hiện hành động này?</p>
	        </div>
	        <div class="modal-footer" style="text-align: center;">
	            <button class="btn" id="customConfirmCancel" style="background-color: #6c757d; color:white; margin-right: 10px;">Hủy</button>
	            <button class="btn btn-danger" id="customConfirmOk">Đồng ý</button>
	        </div>
	    </div>
	</div>
    <script src="./../js/utils.js"></script>
    <script src="./../js/ui_notifications.js"></script>
    <script src="./../js/ui_confirm_modal.js"></script>
    <script src="./../js/ui_checkbox_handler.js"></script>
    <script src="./../js/phongBan.js"></script>
    <script src="./../js/nhanVien.js"></script>
    <script src="./../js/page_employee_detail.js"></script>
    <script src="./../js/main.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            console.log("DIAGNOSTIC: DOM fully loaded and parsed for trang_chi_tiet_phong_dieu_hanh_modal.html");
            const transferModal = document.getElementById('transferModal');
            const customConfirm = document.getElementById('customConfirmModal');
            
            console.log('DIAGNOSTIC: transferModal found?', !!transferModal);
            if (transferModal) {
                console.log('DIAGNOSTIC: btn-cancel-transfer-action found inside transferModal?', !!transferModal.querySelector('#btn-cancel-transfer-action'));
                console.log('DIAGNOSTIC: btn-confirm-transfer-action found inside transferModal?', !!transferModal.querySelector('#btn-confirm-transfer-action'));
                console.log('DIAGNOSTIC: department-select found inside transferModal?', !!transferModal.querySelector('#department-select'));
                console.log('DIAGNOSTIC: .close-button found inside transferModal?', !!transferModal.querySelector('.close-button'));
            }
            
            console.log('DIAGNOSTIC: customConfirmModal found?', !!customConfirm);
            if (customConfirm) {
                console.log('DIAGNOSTIC: customConfirmTitle found inside customConfirmModal?', !!customConfirm.querySelector('#customConfirmTitle'));
                console.log('DIAGNOSTIC: customConfirmMessage found inside customConfirmModal?', !!customConfirm.querySelector('#customConfirmMessage'));
                console.log('DIAGNOSTIC: customConfirmOk found inside customConfirmModal?', !!customConfirm.querySelector('#customConfirmOk'));
                console.log('DIAGNOSTIC: customConfirmCancel found inside customConfirmModal?', !!customConfirm.querySelector('#customConfirmCancel'));
            }
        });
    </script>
</body>
</html>